import{_ as s,o as a,c as n,R as l}from"./chunks/framework.9b35f1b8.js";const F=JSON.parse('{"title":"weakMapï¼ŒweakSetï¼Œsetï¼Œmap","description":"","frontmatter":{},"headers":[],"relativePath":"articles/typescript/25-weakMapï¼ŒweakSetï¼Œsetï¼Œmap.md","filePath":"articles/typescript/25-weakMapï¼ŒweakSetï¼Œsetï¼Œmap.md","lastUpdated":1690977115000}'),p={name:"articles/typescript/25-weakMapï¼ŒweakSetï¼Œsetï¼Œmap.md"},e=l(`<h1 id="weakmap-weakset-set-map" tabindex="-1">weakMapï¼ŒweakSetï¼Œsetï¼Œmap <a class="header-anchor" href="#weakmap-weakset-set-map" aria-label="Permalink to &quot;weakMapï¼ŒweakSetï¼Œsetï¼Œmap&quot;">â€‹</a></h1><h2 id="set" tabindex="-1">set <a class="header-anchor" href="#set" aria-label="Permalink to &quot;set&quot;">â€‹</a></h2><p>é›†åˆæ˜¯ç”±ä¸€ç»„<strong>æ— åºä¸”å”¯ä¸€(å³ä¸èƒ½é‡å¤)çš„é¡¹</strong>ç»„æˆçš„ï¼Œå¯ä»¥æƒ³è±¡æˆé›†åˆæ˜¯ä¸€ä¸ªæ—¢æ²¡æœ‰é‡å¤å…ƒç´ ï¼Œä¹Ÿæ²¡æœ‰é¡ºåºæ¦‚å¿µçš„æ•°ç»„ã€‚</p><p>å†…ç½®æœ‰è¿­ä»£å™¨ï¼Œå¯ä»¥ä½¿ç”¨entriesï¼ŒforEachï¼Œfor ofï¼Œä¸”è¿˜æœ‰ä»¥ä¸‹æ–¹æ³•ï¼š</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> set</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Set</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Set</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">set</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(set)</span><span style="color:#676E95;font-style:italic;">//Set(7) { 1, 2, 3, 4, 5, 6, 7 }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(set</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">has</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">))</span><span style="color:#676E95;font-style:italic;">//true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">set</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(set</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">has</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">))</span><span style="color:#676E95;font-style:italic;">//false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">set</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clear</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(set)</span><span style="color:#676E95;font-style:italic;">//Set(0) {}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="map" tabindex="-1">map <a class="header-anchor" href="#map" aria-label="Permalink to &quot;map&quot;">â€‹</a></h2><p>å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯<strong>é”®å€¼å¯¹çš„é›†</strong>åˆï¼Œä½†æ˜¯â€œ<strong>é”®</strong>â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œ<strong>å„ç§ç±»å‹çš„å€¼</strong>ï¼ˆåŒ…æ‹¬å¼•ç”¨ç±»å‹ï¼Œå³å¯¹è±¡objectï¼Œarrayç­‰ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ï¼Œæ˜¯ä¸€ç§æ›´å®Œå–„çš„ Hash ç»“æ„å®ç°ã€‚å¦‚æœä½ éœ€è¦â€œé”®å€¼å¯¹â€çš„æ•°æ®ç»“æ„ï¼ŒMap æ¯” Object æ›´åˆé€‚ã€‚</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> obj</span><span style="color:#89DDFF;">={</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rarrot</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> map</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">object</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">&gt;=new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Map</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;">(obj</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(obj))</span><span style="color:#676E95;font-style:italic;">//1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="weakmap" tabindex="-1">weakMap <a class="header-anchor" href="#weakmap" aria-label="Permalink to &quot;weakMap&quot;">â€‹</a></h2><p>ECMAScript 6 æ–°å¢çš„â€œ<strong>å¼±æ˜ å°„</strong>â€ï¼ˆWeakMapï¼‰æ˜¯ä¸€ç§æ–°çš„é›†åˆç±»å‹ï¼Œä¸ºè¿™é—¨è¯­è¨€å¸¦æ¥äº†<strong>å¢å¼ºçš„é”®/ å€¼å¯¹å­˜å‚¨æœºåˆ¶</strong>ã€‚WeakMap æ˜¯ Map çš„â€œå…„å¼Ÿâ€ç±»å‹ï¼Œå…¶ API ä¹Ÿæ˜¯ Map çš„å­é›†ã€‚WeakMap ä¸­çš„â€œweakâ€ï¼ˆå¼±ï¼‰ï¼Œ æè¿°çš„æ˜¯ <strong>JavaScript åƒåœ¾å›æ”¶ç¨‹åºå¯¹å¾…â€œå¼±æ˜ å°„â€ä¸­é”®çš„æ–¹å¼</strong>ã€‚</p><p><code>æ³¨æ„ï¼š</code>å­˜å‚¨çš„ä¸ºå¼•ç”¨ç±»å‹</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// è¿™é‡Œå¯¹anyåªæœ‰ä¸¤æ¬¡ä½¿ç”¨ï¼Œweakmapå¯¹objçš„æ“ä½œä¸ä¼šè¢«åƒåœ¾å›æ”¶ç­–ç•¥è®¡æ•°</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> obj</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rarrot</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#676E95;font-style:italic;">//1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> a1</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> obj</span><span style="color:#676E95;font-style:italic;">//2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> weakmap</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">WeakMap</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">object</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WeakMap</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">weakmap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;">(obj</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> a1)</span><span style="color:#676E95;font-style:italic;">//2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ğŸš€  a1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> a1)</span><span style="color:#676E95;font-style:italic;">//ğŸš€  a1 { name: &#39;rarrot&#39; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å½“è®¾ç½®a1ä¹Ÿä¸ºnullæ—¶ï¼Œobjå°±æ²¡æœ‰è¢«å¼•ç”¨äº†ï¼Œå°±ä¼šè¢«åƒåœ¾å›æ”¶æ‰</span></span>
<span class="line"><span style="color:#A6ACCD;">a1</span><span style="color:#89DDFF;">=null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è¿™é‡Œå°±è·å–ä¸åˆ°å€¼äº†</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(weakmap)</span><span style="color:#676E95;font-style:italic;">//underfined</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(weakmap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(obj))</span><span style="color:#676E95;font-style:italic;">//underfined</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ä»¥ä¸‹è¿™å¼ å›¾å±•ç¤ºçš„æ˜¯objè¿˜æ²¡æœ‰è¢«åƒåœ¾å›æ”¶æ—¶çš„weakmapï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿weakmapä¸­æœ‰å€¼ï¼Œä¹Ÿå–ä¸åˆ°ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.staticaly.com/gh/hr1201/img@main/imgs/202308021405057.png" alt=""></p><p>æŠŠå¯¹objçš„å¼•ç”¨éƒ½ç»™å»æ‰åï¼Œå¹¶ä¸”è¿›è¡Œå¤šæ¬¡åˆ·æ–°ï¼Œå°±å¯ä»¥çœ‹åˆ°Googleå¼•æ“çš„v8å¼•æ“æ˜¯æŠŠè¿™ä¸€ä¸ªobjç»™å›æ”¶äº†ï¼Œweakmapä¸­çš„æ•°æ®ä¹Ÿä¸å­˜åœ¨äº†ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.staticaly.com/gh/hr1201/img@main/imgs/202308021409742.png" alt=""></p><h2 id="weakset" tabindex="-1">weakSet <a class="header-anchor" href="#weakset" aria-label="Permalink to &quot;weakSet&quot;">â€‹</a></h2><p>ECMAScript 6 æ–°å¢çš„â€œ<strong>å¼±é›†åˆ</strong>â€ï¼ˆWeakSetï¼‰æ˜¯ä¸€ç§æ–°çš„é›†åˆç±»å‹ï¼Œä¸ºè¿™é—¨è¯­è¨€å¸¦æ¥äº†<strong>é›†åˆæ•°æ®ç»“æ„</strong>ã€‚WeakSet æ˜¯ Set çš„â€œå…„å¼Ÿâ€ç±»å‹ï¼Œå…¶ API ä¹Ÿæ˜¯ Set çš„å­é›†ã€‚WeakSet ä¸­çš„â€œweakâ€ï¼ˆå¼±ï¼‰ï¼Œæè¿°çš„æ˜¯ J<strong>avaScript åƒåœ¾å›æ”¶ç¨‹åºå¯¹å¾…â€œå¼±é›†åˆâ€ä¸­å€¼çš„æ–¹å¼</strong>ã€‚</p><p><code>æ³¨æ„ï¼š</code>å­˜å‚¨çš„ä¸ºå¼•ç”¨ç±»å‹</p><p>å…·ä½“å¯ä»¥å‰å¾€JavaScriptçš„<a href="https://www.rorrot.cc/articles/JavaScript/WeakMap.html" target="_blank" rel="noreferrer">weakMap</a>å’Œ<a href="https://www.rorrot.cc/articles/JavaScript/WeakSet.html" target="_blank" rel="noreferrer">weakSet</a>ã€‚</p>`,20),o=[e];function t(r,c,y,i,D,A){return a(),n("div",null,o)}const b=s(p,[["render",t]]);export{F as __pageData,b as default};
