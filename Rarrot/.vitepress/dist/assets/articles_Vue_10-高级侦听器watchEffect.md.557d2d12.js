import{d as u,h as t,y as b,o as r,c as E,k as l,a1 as m,a2 as F,l as c,a3 as d,H as y,F as g,p as f,m as h,_,Q as A}from"./chunks/framework.7104966c.js";import{B as D}from"./chunks/Button.1eeb95d2.js";const C=n=>(f("data-v-05a26b10"),n=n(),h(),n),v={class:"inp-form"},B=C(()=>l("span",{class:"inp-border"},null,-1)),q=u({__name:"watchEffect",setup(n){let s=t(""),a=t();const i=b(p=>{console.log("ğŸš€  inp",a.value),console.log("ğŸš€  message",s.value),p(()=>{console.log("before")})},{flush:"post"});return(p,o)=>(r(),E(g,null,[l("div",v,[m(l("input",{class:"inp",ref_key:"input",ref:a,"onUpdate:modelValue":o[0]||(o[0]=e=>d(s)?s.value=e:s=e),placeholder:"æ‰“å¼€F12,è¿›è¡Œè¾“å…¥æµ‹è¯•",name:"text",required:!0,type:"text"},null,512),[[F,c(s)]]),B]),y(D,{onClick:c(i),hoverF:"åœæ­¢",hoverS:"ç‚¹å‡»!"},null,8,["onClick"])],64))}});const w=_(q,[["__scopeId","data-v-05a26b10"]]),k=A(`<h1 id="é«˜çº§ä¾¦å¬å™¨watcheffect" tabindex="-1">é«˜çº§ä¾¦å¬å™¨watchEffect <a class="header-anchor" href="#é«˜çº§ä¾¦å¬å™¨watcheffect" aria-label="Permalink to &quot;é«˜çº§ä¾¦å¬å™¨watchEffect&quot;">â€‹</a></h1><p><code>watchEffect</code> æ˜¯ Vue 3 ä¸­çš„ä¸€ä¸ªå“åº”å¼ä¾èµ–è·Ÿè¸ªå‡½æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨è·Ÿè¸ªå…¶å†…éƒ¨ä½¿ç”¨çš„å“åº”å¼æ•°æ®ï¼Œå¹¶åœ¨è¿™äº›æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é‡æ–°æ‰§è¡Œã€‚</p><p><code>watchEffect</code> ä¸ <code>watch</code> ç±»ä¼¼ï¼Œä½†å®ƒä¸éœ€è¦æŒ‡å®šä¾¦å¬çš„æ•°æ®æºï¼Œå› ä¸ºå®ƒä¼š<strong>è‡ªåŠ¨</strong>æ£€æµ‹ä¾èµ–ã€‚</p><h2 id="ç¤ºä¾‹" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h2><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;inp&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">v-model</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;message&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">@click</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;stop&quot;</span><span style="color:#E1E4E8;">&gt;åœæ­¢ç›‘å¬stop&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">lang</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&#39;ts&#39;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, watchEffect } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> message </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">&gt;(</span><span style="color:#9ECBFF;">&#39;rarrot&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">watchEffect</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">oninvalidate</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> inp </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">querySelector</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;.inp&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">HTMLInputElement</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å¯ä»¥è·å–åˆ°å…ƒç´ </span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ğŸš€  inp&quot;</span><span style="color:#E1E4E8;">, inp)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// watchEffectæ˜¯éæƒ°æ€§çš„ï¼Œè¿™é‡Œä½¿ç”¨äº†messageå°±ä¼šç›´æ¥å»ç›‘å¬message</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ğŸš€  message&quot;</span><span style="color:#E1E4E8;">, message.value)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">oninvalidate</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;before&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">}, {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// pre ç»„ä»¶æ›´æ–°å‰æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// sync å¼ºåˆ¶æ•ˆæœå§‹ç»ˆåŒæ­¥è§¦å‘</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// post ç»„ä»¶æ›´æ–°åæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#E1E4E8;">    flush: </span><span style="color:#9ECBFF;">&#39;post&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å¯ä»¥ç”¨æ¥debugger</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// onTrigger(e) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//     debugger</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">scoped</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;inp&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">v-model</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;message&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">@click</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;stop&quot;</span><span style="color:#24292E;">&gt;åœæ­¢ç›‘å¬stop&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">lang</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&#39;ts&#39;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, watchEffect } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> message </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">string</span><span style="color:#24292E;">&gt;(</span><span style="color:#032F62;">&#39;rarrot&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">stop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">watchEffect</span><span style="color:#24292E;">((</span><span style="color:#E36209;">oninvalidate</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> inp </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">querySelector</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.inp&#39;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">HTMLInputElement</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å¯ä»¥è·å–åˆ°å…ƒç´ </span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ğŸš€  inp&quot;</span><span style="color:#24292E;">, inp)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// watchEffectæ˜¯éæƒ°æ€§çš„ï¼Œè¿™é‡Œä½¿ç”¨äº†messageå°±ä¼šç›´æ¥å»ç›‘å¬message</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ğŸš€  message&quot;</span><span style="color:#24292E;">, message.value)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">oninvalidate</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;before&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">}, {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// pre ç»„ä»¶æ›´æ–°å‰æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// sync å¼ºåˆ¶æ•ˆæœå§‹ç»ˆåŒæ­¥è§¦å‘</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// post ç»„ä»¶æ›´æ–°åæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#24292E;">    flush: </span><span style="color:#032F62;">&#39;post&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å¯ä»¥ç”¨æ¥debugger</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// onTrigger(e) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//     debugger</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// }</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h3 id="æµ‹è¯•" tabindex="-1">æµ‹è¯• <a class="header-anchor" href="#æµ‹è¯•" aria-label="Permalink to &quot;æµ‹è¯•&quot;">â€‹</a></h3>`,6),V=JSON.parse('{"title":"é«˜çº§ä¾¦å¬å™¨watchEffect","description":"","frontmatter":{},"headers":[],"relativePath":"articles/Vue/10-é«˜çº§ä¾¦å¬å™¨watchEffect.md","filePath":"articles/Vue/10-é«˜çº§ä¾¦å¬å™¨watchEffect.md","lastUpdated":1696861475000}'),x={name:"articles/Vue/10-é«˜çº§ä¾¦å¬å™¨watchEffect.md"},I=Object.assign(x,{setup(n){return(s,a)=>(r(),E("div",null,[k,y(w)]))}});export{V as __pageData,I as default};
