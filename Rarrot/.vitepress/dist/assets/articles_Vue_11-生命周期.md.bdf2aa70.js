import{B as E}from"./chunks/Button.1eeb95d2.js";import{d as y,h as o,a4 as F,j as u,a5 as b,B as d,a6 as m,z as g,a7 as D,a8 as C,o as p,c as e,k as A,t as B,H as t,a9 as h,b as f,e as k,Q as i}from"./chunks/framework.7104966c.js";const v=y({__name:"life",setup(c){console.log("setup");const s=o("Rarrot"),n=o(),a=()=>{s.value="æˆ‘è¢«ä¿®æ”¹äº†"},r=h();return console.log("ğŸš€  instance",r),F(()=>{console.log("ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“å‰è°ƒç”¨",n.value)}),u(()=>{console.log("ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨",n.value)}),b(()=>{console.log("æ›´æ–°å‰")}),d(()=>{console.log("æ›´æ–°å")}),m(()=>{console.log("é”€æ¯ç»„ä»¶ä¹‹å‰è°ƒç”¨")}),g(()=>{console.log("é”€æ¯ç»„ä»¶ä¹‹åè°ƒç”¨")}),D(l=>{console.log(l)}),C(l=>{console.log(l)}),(l,U)=>(p(),e("div",null,[A("div",{ref_key:"div",ref:n,style:{"font-size":"20px","font-weight":"600",color:"#ecc208"}},B(s.value),513),t(E,{onClick:a,hoverF:"ä¿®æ”¹",hoverS:"click!"})]))}}),_=y({__name:"lifeCycle",setup(c){const s=o(!0);return(n,a)=>(p(),e("div",null,[s.value?(p(),f(v,{key:0})):k("",!0),t(E,{onClick:a[0]||(a[0]=r=>s.value=!s.value),hoverF:"é”€æ¯",hoverS:"click!"})]))}}),R=i(`<h1 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;ç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h1><p>ã€å®˜æ–¹è§£é‡Šã€‘æ¯ä¸ª Vue ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½éœ€è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œæ¯”å¦‚è®¾ç½®å¥½æ•°æ®ä¾¦å¬ï¼Œç¼–è¯‘æ¨¡æ¿ï¼ŒæŒ‚è½½å®ä¾‹åˆ° DOMï¼Œä»¥åŠåœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–° DOMã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿä¼šè¿è¡Œè¢«ç§°ä¸ºç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ã€‚</p><br><p>ä¸‹è¡¨æ˜¯å¯¹Vue 3ç”Ÿå‘½å‘¨æœŸé’©å­çš„ç†è§£å’Œç”¨æ³•çš„ç®€è¦è¯´æ˜ï¼š</p><table><thead><tr><th>é’©å­å‡½æ•°</th><th>è¯´æ˜</th><th>ç”¨æ³•ç¤ºä¾‹</th></tr></thead><tbody><tr><td>onBeforeMount</td><td>åœ¨ç»„ä»¶<strong>æŒ‚è½½ä¹‹å‰</strong>è¢«è°ƒç”¨ï¼Œæ­¤æ—¶æ¨¡æ¿ç¼–è¯‘å·²å®Œæˆï¼Œä½†å°šæœªå°†ç»„ä»¶æ’å…¥åˆ°DOMä¸­</td><td><code> onBeforeMount(() =&gt; { // åœ¨ç»„ä»¶æŒ‚è½½ä¹‹å‰çš„é€»è¾‘ })</code></td></tr><tr><td>onMounted</td><td>åœ¨ç»„ä»¶<strong>æŒ‚è½½åˆ°DOMå</strong>è¢«è°ƒç”¨</td><td><code> onMounted(() =&gt; { // åœ¨ç»„ä»¶æŒ‚è½½åˆ°DOMåçš„é€»è¾‘ })</code></td></tr><tr><td>onBeforeUnmount</td><td>åœ¨ç»„ä»¶<strong>å¸è½½ä¹‹å‰</strong>è¢«è°ƒç”¨ï¼Œæ­¤æ—¶ç»„ä»¶ä»ç„¶åœ¨DOMä¸­</td><td><code> onBeforeUnmount(() =&gt; { // åœ¨ç»„ä»¶å¸è½½ä¹‹å‰çš„é€»è¾‘ })</code></td></tr><tr><td>onUnmounted</td><td>åœ¨ç»„ä»¶<strong>å¸è½½ä¹‹å</strong>è¢«è°ƒç”¨ï¼Œæ­¤æ—¶ç»„ä»¶å·²ä»DOMä¸­ç§»é™¤</td><td><code> onUnmounted(() =&gt; { // åœ¨ç»„ä»¶å¸è½½åçš„é€»è¾‘ })</code></td></tr><tr><td>onBeforeUpdate</td><td>åœ¨ç»„ä»¶<strong>æ›´æ–°ä¹‹å‰</strong>è¢«è°ƒç”¨ï¼Œå¯ç”¨äºåœ¨æ›´æ–°ä¹‹å‰è®¿é—®æ—§çš„DOMçŠ¶æ€æˆ–æ•°æ®</td><td><code> onBeforeUpdate(() =&gt; { // åœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰çš„é€»è¾‘ })</code></td></tr><tr><td>onUpdated</td><td>åœ¨ç»„ä»¶<strong>æ›´æ–°ä¹‹å</strong>è¢«è°ƒç”¨ï¼Œæ­¤æ—¶DOMå·²ç»æ›´æ–°</td><td><code> onUpdated(() =&gt; { // åœ¨ç»„ä»¶æ›´æ–°åçš„é€»è¾‘ })</code></td></tr><tr><td>onRenderTracked</td><td>åœ¨ç»„ä»¶æ¸²æŸ“æ—¶è¢«è°ƒç”¨ï¼Œç”¨äº<strong>è¿½è¸ª</strong>æ¸²æŸ“è¿‡ç¨‹ä¸­çš„<strong>ä¾èµ–</strong>å…³ç³»</td><td><code> onRenderTracked((event) =&gt; { // åœ¨ç»„ä»¶æ¸²æŸ“æ—¶çš„é€»è¾‘ })</code></td></tr><tr><td>onRenderTriggered</td><td>åœ¨ç»„ä»¶æ¸²æŸ“æ—¶è¢«è°ƒç”¨ï¼Œç”¨äº<strong>è¿½è¸ªè§¦å‘</strong>æ¸²æŸ“çš„ä¾èµ–å…³ç³»</td><td><code> onRenderTriggered((event) =&gt; { // åœ¨ç»„ä»¶æ¸²æŸ“æ—¶çš„é€»è¾‘ })</code></td></tr></tbody></table><p><img src="https://cn.vuejs.org/assets/lifecycle.16e4c08e.png" alt="Vueå®˜æ–¹ç”Ÿå‘½å‘¨æœŸå›¾ä¾‹"></p><h2 id="æµ‹è¯•ä»£ç " tabindex="-1">æµ‹è¯•ä»£ç  <a class="header-anchor" href="#æµ‹è¯•ä»£ç " aria-label="Permalink to &quot;æµ‹è¯•ä»£ç &quot;">â€‹</a></h2><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-z4DAQ" id="tab-BJfoF4m" checked="checked"><label for="tab-BJfoF4m">lifeCycle.vue</label><input type="radio" name="group-z4DAQ" id="tab-7wAw5zm"><label for="tab-7wAw5zm">life.vue</label></div><div class="blocks"><div class="language-vue vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">&lt;!-- ä½¿ç”¨v-ifç»„ä»¶ä¼šç›´æ¥é”€æ¯ï¼Œè€Œv-showåˆ™æ˜¯éšè— --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#FDAEB7;font-style:italic;">life</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">v-if</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;station&quot;</span><span style="color:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">&lt;!-- ç”¨æ¥é”€æ¯lifeç»„ä»¶ï¼Œä½¿onBeforeUnmountå’ŒonUnmountedè¢«è°ƒç”¨ --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">Button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">@click</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;station=!station&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">hoverF</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;é”€æ¯&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">hoverS</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;click!&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">/</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">lang</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&#39;ts&#39;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Button </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;../../ç»„ä»¶åº“/Button.vue&#39;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> life </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./life.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">station</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">boolean</span><span style="color:#E1E4E8;">&gt;(</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">scoped</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">&lt;!-- ä½¿ç”¨v-ifç»„ä»¶ä¼šç›´æ¥é”€æ¯ï¼Œè€Œv-showåˆ™æ˜¯éšè— --&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#B31D28;font-style:italic;">life</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">v-if</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;station&quot;</span><span style="color:#24292E;">/&gt;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">&lt;!-- ç”¨æ¥é”€æ¯lifeç»„ä»¶ï¼Œä½¿onBeforeUnmountå’ŒonUnmountedè¢«è°ƒç”¨ --&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">Button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">@click</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;station=!station&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">hoverF</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;é”€æ¯&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">hoverS</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;click!&quot;</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">/</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">lang</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&#39;ts&#39;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Button </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;../../ç»„ä»¶åº“/Button.vue&#39;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> life </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./life.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">station</span><span style="color:#D73A49;">=</span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">boolean</span><span style="color:#24292E;">&gt;(</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;div&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">style</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;font-size: 20px;font-weight: 600;color: #ecc208;&quot;</span><span style="color:#E1E4E8;">&gt;{{ str }}&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">Button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">@click</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;change&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">hoverF</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;ä¿®æ”¹&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">hoverS</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;click!&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">/</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">lang</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&#39;ts&#39;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, getCurrentInstance, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onMounted, onUnmounted, onUpdated, onRenderTracked, onRenderTriggered } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Button </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;../../ç»„ä»¶åº“/Button.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// import { ref } from &#39;vue&#39;</span></span>
<span class="line"><span style="color:#6A737D;">// åœ¨ä½¿ç”¨options APIæ—¶æ˜¯æ²¡æœ‰beforeCreateå’Œcreatedè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸçš„</span></span>
<span class="line"><span style="color:#6A737D;">// setupè¯­æ³•ç³–æ¨¡å¼æ˜¯æ²¡æœ‰beforeCreateå’Œcreatedè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸçš„</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;setup&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">str</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">&gt;(</span><span style="color:#9ECBFF;">&#39;Rarrot&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">HTMLDivElement</span><span style="color:#E1E4E8;">&gt;()</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">change</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    str.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;æˆ‘è¢«ä¿®æ”¹äº†&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#6A737D;">// é€šè¿‡getCurrentInstanceæŸ¥çœ‹å½“å‰ç»„ä»¶çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªhook</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">instance</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">getCurrentInstance</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ğŸš€  instance&quot;</span><span style="color:#E1E4E8;">, instance)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“å‰è°ƒç”¨ï¼Œæ­¤æ—¶æ ¹å…ƒç´ ä¸å­˜åœ¨ï¼Œæ— æ³•è®¿é—®åˆ°DOM</span></span>
<span class="line"><span style="color:#B392F0;">onBeforeMount</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“å‰è°ƒç”¨&quot;</span><span style="color:#E1E4E8;">, div.value)</span><span style="color:#6A737D;">//undefined</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨ï¼Œè¯¥å…ƒç´ ç°åœ¨å¯ç”¨ï¼Œå…è®¸ç›´æ¥DOMè®¿é—®</span></span>
<span class="line"><span style="color:#B392F0;">onMounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨&quot;</span><span style="color:#E1E4E8;">, div.value)</span><span style="color:#6A737D;">//&lt;div&gt;Rarrot&lt;/div&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// è·å–æ›´æ–°ä¹‹å‰çš„dom</span></span>
<span class="line"><span style="color:#B392F0;">onBeforeUpdate</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;æ›´æ–°å‰&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// è·å–æ›´æ–°ä¹‹åçš„dom</span></span>
<span class="line"><span style="color:#B392F0;">onUpdated</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;æ›´æ–°å&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// é”€æ¯ç»„ä»¶ä¹‹å‰è°ƒç”¨</span></span>
<span class="line"><span style="color:#B392F0;">onBeforeUnmount</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;é”€æ¯ç»„ä»¶ä¹‹å‰è°ƒç”¨&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// é”€æ¯ç»„ä»¶ä¹‹åè°ƒç”¨</span></span>
<span class="line"><span style="color:#B392F0;">onUnmounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;é”€æ¯ç»„ä»¶ä¹‹åè°ƒç”¨&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä»¥ä¸‹ä¸¤ä¸ªé’©å­ä¸»è¦ç”¨äºè°ƒè¯•ï¼ŒonRenderTrackedç”¨æ¥è·å–æ”¶é›†çš„ä¾èµ–</span></span>
<span class="line"><span style="color:#B392F0;">onRenderTracked</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// æ‰“å°effectç­‰å¯¹è±¡</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(e)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä¾èµ–è¢«ä¿®æ”¹æ—¶åˆ™ä¼šè°ƒç”¨æ­¤é’©å­</span></span>
<span class="line"><span style="color:#B392F0;">onRenderTriggered</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(e)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">scoped</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;div&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">style</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;font-size: 20px;font-weight: 600;color: #ecc208;&quot;</span><span style="color:#24292E;">&gt;{{ str }}&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">Button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">@click</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;change&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">hoverF</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;ä¿®æ”¹&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">hoverS</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;click!&quot;</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">/</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">lang</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&#39;ts&#39;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, getCurrentInstance, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onMounted, onUnmounted, onUpdated, onRenderTracked, onRenderTriggered } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Button </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;../../ç»„ä»¶åº“/Button.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// import { ref } from &#39;vue&#39;</span></span>
<span class="line"><span style="color:#6A737D;">// åœ¨ä½¿ç”¨options APIæ—¶æ˜¯æ²¡æœ‰beforeCreateå’Œcreatedè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸçš„</span></span>
<span class="line"><span style="color:#6A737D;">// setupè¯­æ³•ç³–æ¨¡å¼æ˜¯æ²¡æœ‰beforeCreateå’Œcreatedè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸçš„</span></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;setup&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">str</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">string</span><span style="color:#24292E;">&gt;(</span><span style="color:#032F62;">&#39;Rarrot&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">div</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">HTMLDivElement</span><span style="color:#24292E;">&gt;()</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">change</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    str.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;æˆ‘è¢«ä¿®æ”¹äº†&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6A737D;">// é€šè¿‡getCurrentInstanceæŸ¥çœ‹å½“å‰ç»„ä»¶çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªhook</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">instance</span><span style="color:#D73A49;">=</span><span style="color:#6F42C1;">getCurrentInstance</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ğŸš€  instance&quot;</span><span style="color:#24292E;">, instance)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“å‰è°ƒç”¨ï¼Œæ­¤æ—¶æ ¹å…ƒç´ ä¸å­˜åœ¨ï¼Œæ— æ³•è®¿é—®åˆ°DOM</span></span>
<span class="line"><span style="color:#6F42C1;">onBeforeMount</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“å‰è°ƒç”¨&quot;</span><span style="color:#24292E;">, div.value)</span><span style="color:#6A737D;">//undefined</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨ï¼Œè¯¥å…ƒç´ ç°åœ¨å¯ç”¨ï¼Œå…è®¸ç›´æ¥DOMè®¿é—®</span></span>
<span class="line"><span style="color:#6F42C1;">onMounted</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨&quot;</span><span style="color:#24292E;">, div.value)</span><span style="color:#6A737D;">//&lt;div&gt;Rarrot&lt;/div&gt;</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// è·å–æ›´æ–°ä¹‹å‰çš„dom</span></span>
<span class="line"><span style="color:#6F42C1;">onBeforeUpdate</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æ›´æ–°å‰&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// è·å–æ›´æ–°ä¹‹åçš„dom</span></span>
<span class="line"><span style="color:#6F42C1;">onUpdated</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æ›´æ–°å&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// é”€æ¯ç»„ä»¶ä¹‹å‰è°ƒç”¨</span></span>
<span class="line"><span style="color:#6F42C1;">onBeforeUnmount</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;é”€æ¯ç»„ä»¶ä¹‹å‰è°ƒç”¨&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// é”€æ¯ç»„ä»¶ä¹‹åè°ƒç”¨</span></span>
<span class="line"><span style="color:#6F42C1;">onUnmounted</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;é”€æ¯ç»„ä»¶ä¹‹åè°ƒç”¨&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä»¥ä¸‹ä¸¤ä¸ªé’©å­ä¸»è¦ç”¨äºè°ƒè¯•ï¼ŒonRenderTrackedç”¨æ¥è·å–æ”¶é›†çš„ä¾èµ–</span></span>
<span class="line"><span style="color:#6F42C1;">onRenderTracked</span><span style="color:#24292E;">((</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// æ‰“å°effectç­‰å¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(e)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// ä¾èµ–è¢«ä¿®æ”¹æ—¶åˆ™ä¼šè°ƒç”¨æ­¤é’©å­</span></span>
<span class="line"><span style="color:#6F42C1;">onRenderTriggered</span><span style="color:#24292E;">((</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(e)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div></div></div><h2 id="æµ‹è¯•ç”¨ä¾‹" tabindex="-1">æµ‹è¯•ç”¨ä¾‹ <a class="header-anchor" href="#æµ‹è¯•ç”¨ä¾‹" aria-label="Permalink to &quot;æµ‹è¯•ç”¨ä¾‹&quot;">â€‹</a></h2><p>å¯ä»¥ç”¨F12æ‰“å¼€ <strong>å¼€å‘è€…å·¥å…·</strong> æŸ¥çœ‹</p>`,10),T=i(`<h2 id="æºç è§£è¯»" tabindex="-1">æºç è§£è¯» <a class="header-anchor" href="#æºç è§£è¯»" aria-label="Permalink to &quot;æºç è§£è¯»&quot;">â€‹</a></h2><p>é€šè¿‡ä½¿ç”¨ä¸€ä¸ªæšä¸¾ç±»å‹å°†é’©å­æŒ‚è½½åˆ°ç»„ä»¶å®ä¾‹ä¸Šï¼š</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-gsimM" id="tab-tP6Xrsl" checked="checked"><label for="tab-tP6Xrsl">./apiLifecycle.ts</label><input type="radio" name="group-gsimM" id="tab-hdcBvr_"><label for="tab-hdcBvr_">LifecycleHooks</label></div><div class="blocks"><div class="language-typescript vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°æ—¶åœ¨ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µå»æ‰§è¡Œï¼Œæ‰€ä»¥æŠŠè¿™äº›é’©å­æŒ‚è½½åˆ°ç»„ä»¶çš„å®ä¾‹ä¸Šé¢</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">onBeforeMount</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHook</span><span style="color:#E1E4E8;">(LifecycleHooks.</span><span style="color:#79B8FF;">BEFORE_MOUNT</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">onMounted</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHook</span><span style="color:#E1E4E8;">(LifecycleHooks.</span><span style="color:#79B8FF;">MOUNTED</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">onBeforeUpdate</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHook</span><span style="color:#E1E4E8;">(LifecycleHooks.</span><span style="color:#79B8FF;">BEFORE_UPDATE</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">onUpdated</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHook</span><span style="color:#E1E4E8;">(LifecycleHooks.</span><span style="color:#79B8FF;">UPDATED</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">onBeforeUnmount</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHook</span><span style="color:#E1E4E8;">(LifecycleHooks.</span><span style="color:#79B8FF;">BEFORE_UNMOUNT</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">onUnmounted</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHook</span><span style="color:#E1E4E8;">(LifecycleHooks.</span><span style="color:#79B8FF;">UNMOUNTED</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">onServerPrefetch</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHook</span><span style="color:#E1E4E8;">(LifecycleHooks.</span><span style="color:#79B8FF;">SERVER_PREFETCH</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">DebuggerHook</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">DebuggerEvent</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">void</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">onRenderTriggered</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHook</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">DebuggerHook</span><span style="color:#E1E4E8;">&gt;(</span></span>
<span class="line"><span style="color:#E1E4E8;">  LifecycleHooks.</span><span style="color:#79B8FF;">RENDER_TRIGGERED</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">onRenderTracked</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHook</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">DebuggerHook</span><span style="color:#E1E4E8;">&gt;(</span></span>
<span class="line"><span style="color:#E1E4E8;">  LifecycleHooks.</span><span style="color:#79B8FF;">RENDER_TRACKED</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°æ—¶åœ¨ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªé˜¶æ®µå»æ‰§è¡Œï¼Œæ‰€ä»¥æŠŠè¿™äº›é’©å­æŒ‚è½½åˆ°ç»„ä»¶çš„å®ä¾‹ä¸Šé¢</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">onBeforeMount</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createHook</span><span style="color:#24292E;">(LifecycleHooks.</span><span style="color:#005CC5;">BEFORE_MOUNT</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">onMounted</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createHook</span><span style="color:#24292E;">(LifecycleHooks.</span><span style="color:#005CC5;">MOUNTED</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">onBeforeUpdate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createHook</span><span style="color:#24292E;">(LifecycleHooks.</span><span style="color:#005CC5;">BEFORE_UPDATE</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">onUpdated</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createHook</span><span style="color:#24292E;">(LifecycleHooks.</span><span style="color:#005CC5;">UPDATED</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">onBeforeUnmount</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createHook</span><span style="color:#24292E;">(LifecycleHooks.</span><span style="color:#005CC5;">BEFORE_UNMOUNT</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">onUnmounted</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createHook</span><span style="color:#24292E;">(LifecycleHooks.</span><span style="color:#005CC5;">UNMOUNTED</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">onServerPrefetch</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createHook</span><span style="color:#24292E;">(LifecycleHooks.</span><span style="color:#005CC5;">SERVER_PREFETCH</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">type</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DebuggerHook</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">DebuggerEvent</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">void</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">onRenderTriggered</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createHook</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">DebuggerHook</span><span style="color:#24292E;">&gt;(</span></span>
<span class="line"><span style="color:#24292E;">  LifecycleHooks.</span><span style="color:#005CC5;">RENDER_TRIGGERED</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">onRenderTracked</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createHook</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">DebuggerHook</span><span style="color:#24292E;">&gt;(</span></span>
<span class="line"><span style="color:#24292E;">  LifecycleHooks.</span><span style="color:#005CC5;">RENDER_TRACKED</span></span>
<span class="line"><span style="color:#24292E;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">enum</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">LifecycleHooks</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">BEFORE_CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;bc&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">CREATED</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;c&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">BEFORE_MOUNT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;bm&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">MOUNTED</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;m&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">BEFORE_UPDATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;bu&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">UPDATED</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;u&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">BEFORE_UNMOUNT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;bum&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">UNMOUNTED</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;um&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">DEACTIVATED</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;da&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">ACTIVATED</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">RENDER_TRIGGERED</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;rtg&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">RENDER_TRACKED</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;rtc&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">ERROR_CAPTURED</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;ec&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">SERVER_PREFETCH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;sp&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">enum</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">LifecycleHooks</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">BEFORE_CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;bc&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">CREATED</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;c&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">BEFORE_MOUNT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;bm&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">MOUNTED</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;m&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">BEFORE_UPDATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;bu&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">UPDATED</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;u&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">BEFORE_UNMOUNT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;bum&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">UNMOUNTED</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;um&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">DEACTIVATED</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;da&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">ACTIVATED</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;a&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">RENDER_TRIGGERED</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;rtg&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">RENDER_TRACKED</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;rtc&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">ERROR_CAPTURED</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;ec&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">SERVER_PREFETCH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;sp&#39;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></div></div><p>å¯ä»¥é€šè¿‡<code>getCurrentInstance</code>æ¥æŸ¥çœ‹è¯¥ç»„ä»¶æ³¨å†Œçš„å®ä¾‹ <img src="https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202310112117142.png" alt=""></p><br><p>ç”±äºé’©å­å‡½æ•°ä¼ å…¥çš„å‚æ•°åªæœ‰ç¬¬ä¸€ä¸ªå‚æ•°(lifecycle)æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥ä½¿ç”¨<code>createHook</code>å®ç°ä¸€ä¸ªç§‘é‡ŒåŒ–å°†å…¶å°è£…èµ·æ¥ï¼Œæœ€åè°ƒç”¨<code>injectHook()</code>ï¼Œæºç å¦‚ä¸‹:</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">createHook</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#B392F0;">T</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">&gt; (</span><span style="color:#FFAB70;">lifecycle</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">LifecycleHooks</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  (</span><span style="color:#FFAB70;">hook</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">T</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">target</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ComponentInternalInstance</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> currentInstance) </span><span style="color:#F97583;">=&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// post-create lifecycle registrations are noops during SSR (except for serverPrefetch)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// åˆ›å»ºåç”Ÿå‘½å‘¨æœŸæ³¨å†Œåœ¨ SSR æœŸé—´æ˜¯æ— æ“ä½œçš„ï¼ˆserverPrefetch é™¤å¤–ï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">    (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">isInSSRComponentSetup </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> lifecycle </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> LifecycleHooks.</span><span style="color:#79B8FF;">SERVER_PREFETCH</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">injectHook</span><span style="color:#E1E4E8;">(lifecycle, (</span><span style="color:#F97583;">...</span><span style="color:#FFAB70;">args</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">unknown</span><span style="color:#E1E4E8;">[]) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">hook</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">args), target)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">createHook</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#6F42C1;">T</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Function</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">any</span><span style="color:#24292E;">&gt; (</span><span style="color:#E36209;">lifecycle</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">LifecycleHooks</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span></span>
<span class="line"><span style="color:#24292E;">  (</span><span style="color:#E36209;">hook</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">T</span><span style="color:#24292E;">, </span><span style="color:#E36209;">target</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ComponentInternalInstance</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> currentInstance) </span><span style="color:#D73A49;">=&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// post-create lifecycle registrations are noops during SSR (except for serverPrefetch)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// åˆ›å»ºåç”Ÿå‘½å‘¨æœŸæ³¨å†Œåœ¨ SSR æœŸé—´æ˜¯æ— æ“ä½œçš„ï¼ˆserverPrefetch é™¤å¤–ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">    (</span><span style="color:#D73A49;">!</span><span style="color:#24292E;">isInSSRComponentSetup </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> lifecycle </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> LifecycleHooks.</span><span style="color:#005CC5;">SERVER_PREFETCH</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">&amp;&amp;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">injectHook</span><span style="color:#24292E;">(lifecycle, (</span><span style="color:#D73A49;">...</span><span style="color:#E36209;">args</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">unknown</span><span style="color:#24292E;">[]) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">hook</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">args), target)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç”¨äºæ³¨å†Œé’©å­çš„å‡½æ•°<code>injectHook()</code>ï¼š</p><details class="details custom-block"><summary>å±•å¼€ä»£ç </summary><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">injectHook</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">type</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">LifecycleHooks</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">hook</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> { </span><span style="color:#B392F0;">__weh</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">target</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ComponentInternalInstance</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> currentInstance,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">prepend</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">boolean</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (target) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å¦‚æœæœ‰hookå‡½æ•°ç›´æ¥è¿”å›ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œhooksä¸ºFunctionç±»å‹</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">hooks</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> target[type] </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> (target[type] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [])</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ç¼“å­˜injected hooksçš„é”™è¯¯å¤„ç†åŒ…è£…å™¨ï¼Œå› æ­¤ç›¸åŒçš„hookå¯ä»¥ç”±è°ƒåº¦ç¨‹åºæ­£ç¡®åˆ é™¤é‡å¤æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//  â€œ__wehâ€ä»£è¡¨â€œæœ‰é”™è¯¯è¦å¤„ç†â€ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">wrappedHook</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">      hook.__weh </span><span style="color:#F97583;">||</span></span>
<span class="line"><span style="color:#E1E4E8;">      (hook.</span><span style="color:#B392F0;">__weh</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">...</span><span style="color:#FFAB70;">args</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">unknown</span><span style="color:#E1E4E8;">[]) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (target.isUnmounted) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">return</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// disable tracking inside all lifecycle hooks</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// since they can potentially be called inside effects.</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// åœæ­¢ä¾èµ–æ”¶é›†ï¼Œé¿å…é‡å¤æ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">pauseTracking</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// Set currentInstance during hook invocation.</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// This assumes the hook does not synchronously trigger other hooks, which</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// can only be false when the user does something really funky.</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// è®¾ç½®targetä¸ºå½“å‰å®ä¾‹</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">setCurrentInstance</span><span style="color:#E1E4E8;">(target)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">res</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">callWithAsyncErrorHandling</span><span style="color:#E1E4E8;">(hook, target, type, args)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">unsetCurrentInstance</span><span style="color:#E1E4E8;">()</span><span style="color:#6A737D;">//æ¸…ç©ºå½“å‰ç»„ä»¶å®ä¾‹</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">resetTracking</span><span style="color:#E1E4E8;">()</span><span style="color:#6A737D;">//æ¢å¤ä¾èµ–æ”¶é›†</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> res</span></span>
<span class="line"><span style="color:#E1E4E8;">      })</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (prepend) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      hooks.</span><span style="color:#B392F0;">unshift</span><span style="color:#E1E4E8;">(wrappedHook)</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      hooks.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(wrappedHook)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> wrappedHook</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (__DEV__) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">apiName</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toHandlerKey</span><span style="color:#E1E4E8;">(ErrorTypeStrings[type].</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;"> hook</span><span style="color:#F97583;">$</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">warn</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">\`\${</span><span style="color:#E1E4E8;">apiName</span><span style="color:#9ECBFF;">} is called when there is no active component instance to be \`</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">\`associated with. \`</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">\`Lifecycle injection APIs can only be used during execution of setup().\`</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">        (__FEATURE_SUSPENSE__</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\` If you are using async setup(), make sure to register lifecycle \`</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">\`hooks before the first await statement.\`</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`\`</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    )</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">injectHook</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">type</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">LifecycleHooks</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">hook</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Function</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> { </span><span style="color:#6F42C1;">__weh</span><span style="color:#D73A49;">?:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Function</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">target</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ComponentInternalInstance</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> currentInstance,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">prepend</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">boolean</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span></span>
<span class="line"><span style="color:#24292E;">)</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Function</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">undefined</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (target) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å¦‚æœæœ‰hookå‡½æ•°ç›´æ¥è¿”å›ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œhooksä¸ºFunctionç±»å‹</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">hooks</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> target[type] </span><span style="color:#D73A49;">||</span><span style="color:#24292E;"> (target[type] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [])</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç¼“å­˜injected hooksçš„é”™è¯¯å¤„ç†åŒ…è£…å™¨ï¼Œå› æ­¤ç›¸åŒçš„hookå¯ä»¥ç”±è°ƒåº¦ç¨‹åºæ­£ç¡®åˆ é™¤é‡å¤æ•°æ®ã€‚</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//  â€œ__wehâ€ä»£è¡¨â€œæœ‰é”™è¯¯è¦å¤„ç†â€ã€‚</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">wrappedHook</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span></span>
<span class="line"><span style="color:#24292E;">      hook.__weh </span><span style="color:#D73A49;">||</span></span>
<span class="line"><span style="color:#24292E;">      (hook.</span><span style="color:#6F42C1;">__weh</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">...</span><span style="color:#E36209;">args</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">unknown</span><span style="color:#24292E;">[]) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (target.isUnmounted) {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">return</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// disable tracking inside all lifecycle hooks</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// since they can potentially be called inside effects.</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// åœæ­¢ä¾èµ–æ”¶é›†ï¼Œé¿å…é‡å¤æ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">pauseTracking</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// Set currentInstance during hook invocation.</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// This assumes the hook does not synchronously trigger other hooks, which</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// can only be false when the user does something really funky.</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// è®¾ç½®targetä¸ºå½“å‰å®ä¾‹</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">setCurrentInstance</span><span style="color:#24292E;">(target)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">res</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">callWithAsyncErrorHandling</span><span style="color:#24292E;">(hook, target, type, args)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">unsetCurrentInstance</span><span style="color:#24292E;">()</span><span style="color:#6A737D;">//æ¸…ç©ºå½“å‰ç»„ä»¶å®ä¾‹</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">resetTracking</span><span style="color:#24292E;">()</span><span style="color:#6A737D;">//æ¢å¤ä¾èµ–æ”¶é›†</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> res</span></span>
<span class="line"><span style="color:#24292E;">      })</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (prepend) {</span></span>
<span class="line"><span style="color:#24292E;">      hooks.</span><span style="color:#6F42C1;">unshift</span><span style="color:#24292E;">(wrappedHook)</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      hooks.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(wrappedHook)</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> wrappedHook</span></span>
<span class="line"><span style="color:#24292E;">  } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (__DEV__) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">apiName</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toHandlerKey</span><span style="color:#24292E;">(ErrorTypeStrings[type].</span><span style="color:#6F42C1;">replace</span><span style="color:#24292E;">(</span><span style="color:#032F62;">/ hook</span><span style="color:#D73A49;">$</span><span style="color:#032F62;">/</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">warn</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">\`\${</span><span style="color:#24292E;">apiName</span><span style="color:#032F62;">} is called when there is no active component instance to be \`</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">\`associated with. \`</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">\`Lifecycle injection APIs can only be used during execution of setup().\`</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">        (__FEATURE_SUSPENSE__</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\` If you are using async setup(), make sure to register lifecycle \`</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#032F62;">\`hooks before the first await statement.\`</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`\`</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    )</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div></details><p>å…·ä½“å¯¹äºdomçš„æ“ä½œï¼Œæ¯ä¸ªé˜¶æ®µçš„è°ƒç”¨çš„ä»£ç åœ¨æºç çš„./runtime-core/renderer.tsä¸­ã€‚</p>`,10),w=JSON.parse('{"title":"ç”Ÿå‘½å‘¨æœŸ","description":"","frontmatter":{},"headers":[],"relativePath":"articles/Vue/11-ç”Ÿå‘½å‘¨æœŸ.md","filePath":"articles/Vue/11-ç”Ÿå‘½å‘¨æœŸ.md","lastUpdated":1697120886000}'),H={name:"articles/Vue/11-ç”Ÿå‘½å‘¨æœŸ.md"},O=Object.assign(H,{setup(c){return(s,n)=>(p(),e("div",null,[R,t(_),T]))}});export{w as __pageData,O as default};
