# ç”Ÿæˆå™¨å’Œè¿­ä»£å™¨


-----
## ç”Ÿæˆå™¨

è·ŸES6ä¸­çš„ç”Ÿæˆå™¨æ˜¯ä¸€æ ·çš„

```typescript
//1. ç”Ÿæˆå™¨ ç”¨æ³•ä¸€æ ·
function* gen(){
    yield Promise.resolve('rarrot')//åŒæ­¥å¼‚æ­¥
    yield '666'
    yield '123'
    yield '000'
}

const man=gen()

console.log(man.next())//{ value: Promise { 'rarrot' }, done: false }
console.log(man.next())//{ value: '666', done: false }
console.log(man.next())//{ value: '123', done: false }
console.log(man.next())//{ value: '000', done: false }
console.log(man.next())//{ value: undefined, done: true }
```





## è¿­ä»£å™¨

**è¿­ä»£å™¨**æ˜¯ä¸€ä¸ªå¯ä»¥ç”±ä»»æ„å¯¹è±¡å®ç°çš„æ¥å£ï¼Œæ”¯æŒè¿ç»­è·å–å¯¹è±¡äº§å‡ºçš„æ¯ä¸€ä¸ªå€¼ã€‚ä»»ä½•**å®ç° Iterable æ¥å£çš„å¯¹è±¡**éƒ½æœ‰ä¸€ä¸ª **Symbol.iterator å±æ€§**ï¼Œè¿™ä¸ªå±æ€§å¼•ç”¨é»˜è®¤è¿­ä»£å™¨ã€‚é»˜è®¤è¿­ä»£å™¨å°±åƒä¸€ä¸ªè¿­ä»£å™¨å·¥å‚ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨ä¹‹åä¼šäº§ç”Ÿä¸€ä¸ª**å®ç° Iterator æ¥å£çš„å¯¹è±¡**ï¼Œä½¿ç”¨è¿™ä¸ªå¯¹è±¡å¯ä»¥è°ƒç”¨`next()`æ–¹æ³•ã€‚

```typescript
// 2. è¿­ä»£å™¨
// 3. ç”¨set mapåšä¾‹å­
let set: Set<number> = new Set([1, 1, 2, 2, 3, 3])//è‡ªåŠ¨å»é‡
//  Set(3) { 1, 2, 3 }
console.log(set)

let map: Map<any, any> = new Map()
let Arr = [1, 2, 3]
map.set(Arr, 'rarrot')
map.set('1', 'ä½ æ˜¯è°')
console.log(map.get(Arr))//æŠŠArræ•°ç»„å½“keyï¼Œ'rarrot'ä¸ºvalueï¼Œæ‰€æœ‰è¾“å‡ºrarrot

function args() {
    console.log(arguments)//ä¼ªæ•°ç»„
}

// let list =document.querySelectorAll('div')//ä¼ªæ•°ç»„ï¼Œå¦‚ä¸‹å›¾

// è‡ªå®šä¹‰for of
const each = (value: any) => {
let It: any = value[Symbol.iterator]()
    let next: any = { done: false }
    while (!next.done) {
        next = It.next()
        console.log("ğŸš€ ~ file: index.ts:39 ~ each ~ next:", next)
        if (!next.done) {
            console.log(next.value)
        }
    }
}

/*
 `Â  ğŸš€ ~ file: index.ts:39 ~ each ~ next: { value: 1, done: false }
 `Â  1
 `Â  ğŸš€ ~ file: index.ts:39 ~ each ~ next: { value: 2, done: false }
 `Â  2
 `Â  ğŸš€ ~ file: index.ts:39 ~ each ~ next: { value: 3, done: false }
 `Â  3
 `Â  ğŸš€ ~ file: index.ts:39 ~ each ~ next: { value: undefined, done: true }
*/
each(set)


/*
 `Â  ğŸš€ ~ file: index.ts:39 ~ each ~ next: { value: [ [ 1, 2, 3 ], 'rarrot' ], done: false }
 `Â  [ [ 1, 2, 3 ], 'rarrot' ]
 `Â  ğŸš€ ~ file: index.ts:39 ~ each ~ next: { value: [ '1', 'ä½ æ˜¯è°' ], done: false }
 `Â  [ '1', 'ä½ æ˜¯è°' ]
 `Â  ğŸš€ ~ file: index.ts:39 ~ each ~ next: { value: undefined, done: true }
*/
each(map)
```

![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202307261528988.png)





## è¿­ä»£å™¨çš„è¯­æ³•ç³–(for of)

```typescript
// å¯¹è±¡ä¸èƒ½ç”¨for of
for(let value of map){
Â  Â  // [ [ 1, 2, 3 ], 'rarrot' ]
Â  Â  // [ '1', 'ä½ æ˜¯è°' ]
Â  Â  console.log(value)
}
```





## è§£æ„

åº•å±‚åŸç†ä¹Ÿæ˜¯å»è°ƒç”¨iterator

```typescript
let [a,b,c]=[4,5,6]

console.log(a,b,c)//4 5 6

let a1=[4,5,6]
let copy=[...a1]
console.log(...a1) // 4,5,6
console.log(copy)  // [ 4, 5, 6 ]
```





## å¯¹è±¡ä¸­å®ç°è¿­ä»£å™¨

å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯currentçš„å¢åŠ ï¼Œç›´åˆ°current=trueæ‰åœæ­¢ï¼Œè¿”å›valueä¸ºunderfinedå’Œdoneä¸ºtrueã€‚æœªåœæ­¢å°±è¿”å›currentçš„å€¼ï¼Œä»¥åŠdoneä¸ºfalseã€‚

```typescript
let obj = {
    max: 3,
    current: 0,
    [Symbol.iterator]() {
        return {
            max: this.max,
            current: this.current,
            next() {
                if (this.current == this.max) {
                    return {
                        value: undefined,
                        done: true
                    }
                } else {
                    return {
                        value: this.current++,
                        done: false
                    }
                }
            }
        }
    }
}

for (let value of obj) {
    // 0
    // 1
    // 2
    console.log(value)
}

// éå†è¿™ä¸ªå¯¹è±¡å¹¶å°† next() çš„è¿”å›å€¼æ”¶é›†åˆ°æ•°ç»„ä¸­
let x = [...obj]
// [ 0, 1, 2 ]
console.log(x)

// å¯¹è±¡è§£æ„ï¼Œæ‰§è¡Œå¯¹è±¡è‡ªå·±çš„å¯æšä¸¾å±æ€§çš„æµ…æ‹·è´ï¼Œå®ƒå®é™…ä¸Šä¸éå†objå¯¹è±¡ã€‚
let o = { ...obj }
/*  
{
   max: 3,
   current: 0,
   [Symbol(Symbol.iterator)]: [Function: [Symbol.iterator]]
}
*/
console.log(o)
```

