# Vue3åŸºç¡€è¯­æ³•

## setupè¯­æ³•ç³–

vue3æ–°å¢ä¸€ä¸ªsetupè¯­æ³•ç³–å½¢å¼ï¼š

â‘ ç¬¬ä¸€ç§å†™æ³•ï¼Œæ³¨æ„éœ€è¦å°†å˜é‡returnå‡ºå»ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
Â  <div>
   // è¿è¡Œç»“æœä¸º'hæ˜¯h'
   {{ a==1?'hæ˜¯h':'nn' }}
Â  </div>
</template>
<script>
export default {
Â  // vue3æ–°å¢setupè¯­æ³•ç³–
Â  setup() {
Â  Â  Â  const a = 1
Â  Â  Â  // å¿…é¡»å°†aå˜é‡returnå‡ºå»æ‰å¯ä»¥æ˜¾ç¤º
Â  Â  Â  return {
Â  Â  Â  Â  Â  a
Â  Â  Â  }
Â  } Â 
}
</script>
<style></style>
```
:::


â‘¡ç”±äºç¬¬ä¸€ç§è¯­æ³•æ¯æ¬¡è¦å°†å˜é‡returnå‡ºå»æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥ä½¿ç”¨ä»¥ä¸‹è¿™ç§å½¢å¼ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
 Â <div>
    // è¿è¡Œç»“æœ'hh'
    {{ a==1?'hh':'nn' }}
Â  </div>
</template>
<script setup lang="ts">
    // è¿™æ˜¯typescriptçš„å†™æ³•

  const a:number=1


</script>
<style></style>
```
:::


## v-text


::: details å±•å¼€ä»£ç 

```Vue
<template>
  <div v-text="a">

  </div>
</template>
<script setup lang="ts">
  const a:string='æˆ‘æ˜¯ä¸€æ®µæ–‡å­—'


</script>
<style></style>
```
:::

![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312159435.png)


## v-html

v-htmlæ”¯æŒhtmlæ ‡ç­¾ï¼Œä½†ä¸æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶çš„æ ‡ç­¾

::: details å±•å¼€ä»£ç 

```Vue
<template>
Â  <div v-html="a">
Â  </div>
</template>
<script setup lang="ts">
Â  const a: string = '<h2>æˆ‘æ˜¯ä¸€æ®µæ–‡å­—<h2>'
</script>
<style></style>
```
:::

![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312202122.png)


## v-show

v-showè·Ÿv-ifçš„ä¸åŒåœ¨äºv-showä»ç„¶ä¼šæ¸²æŸ“å…ƒç´ ï¼Œä½†æ˜¯ä¼šä½¿ç”¨cssçš„display:noneå°†å…ƒç´ éšè—ï¼Œåœ¨å¯¹å…ƒç´ è¿›è¡Œåˆ‡æ¢æ˜¾ç¤ºæ—¶æ€§èƒ½ä¼šæ¯”v-ifé«˜ï¼Œçœ‹ä»£ç ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
 Â  <div v-show="a">
 Â Â  Â  <h2>ä½ çœ‹æˆ‘ä¼šä¸ä¼šæ˜¾ç¤ºå‡ºæ¥å‘¢ï¼Ÿ</h2>
 Â  </div>
</template>
<script setup lang="ts">
 Â  const a:boolean =false
</script>
<style></style>
```
:::
ä½¿ç”¨F12æŸ¥çœ‹å¯çœ‹åˆ°å˜æˆäº†æ³¨é‡Šï¼š

![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312214397.png)

## v-if

å½“aä¸ºtrueæ—¶ï¼Œh2æ ‡ç­¾ä¼šå‡ºç°ï¼Œè‹¥ä¸ºfalseï¼Œåˆ™ä¸ä¼šå‡ºç°ï¼Œä»¥ä¸‹aä¸ºfalseï¼Œä¸å‡ºç°ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
Â  <div v-if="a">
Â  Â  <h2>ä½ çœ‹æˆ‘ä¼šä¸ä¼šæ˜¾ç¤ºå‡ºæ¥å‘¢ï¼Ÿ</h2>
Â  </div>
</template>
<script setup lang="ts">
Â  const a:boolean =true
</script>
<style></style>
```
:::
ä½¿ç”¨F12æŸ¥çœ‹å¯çœ‹åˆ°å˜æˆäº†æ³¨é‡Šï¼š

![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312214602.png)

## v-else

è·Ÿif-elseä¸€ä¸ªæ„æ€ï¼Œçœ‹ä»£ç ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
Â  <div v-if="a">
Â  Â  <h2>ä½ çœ‹æˆ‘ä¼šä¸ä¼šæ˜¾ç¤ºå‡ºæ¥å‘¢ï¼Ÿ</h2>
Â  </div>
Â  <div v-else>
Â  Â  <h2>ä»–ä¸æ˜¾ç¤ºæˆ‘æ¥æ˜¾ç¤º</h2>
Â  </div>
</template>
<script setup lang="ts">
Â  const a:boolean =false
</script>
<style></style>
```
:::
![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312215531.png)



## v-else-if

è·Ÿif-else if-elseä¸€æ ·ï¼Œçœ‹ä»£ç ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
  <div v-if="a">
    <h2>ä½ çœ‹æˆ‘ä¼šä¸ä¼šæ˜¾ç¤ºå‡ºæ¥å‘¢ï¼Ÿ</h2>
  </div>
  <div v-else-if="b">
    <h2>ä»–ä¸æ˜¾ç¤ºæˆ‘æ¥æ˜¾ç¤º</h2>
  </div>
  <div v-else>
    <h2>éƒ½ä¸æ˜¾ç¤ºé‚£æˆ‘ä¹Ÿä¸æ˜¾ç¤º</h2>
  </div>
</template>
<script setup lang="ts">
  const a:string="b"
</script>
<style></style>
```
:::
![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312215913.png)



## v-on

ç”¨äºç»‘å®šäº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ç®€å†™å½¢å¼'@'ï¼Œçœ‹ä»£ç ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
Â  <button @click="clickme">ç‚¹æˆ‘</button>
</template>
<script setup lang="ts">
Â  const clickme = () => {
Â  Â  const a:string='åœ¨æ§åˆ¶å°æ˜¾ç¤ºæˆ‘'
Â  Â  console.log("ğŸš€ ~ file: App.vue:7 ~ clickme ~ a:", a)
Â  }
</script>
<style></style>

<!-- ä»¥ä¸‹ä»£ç æ•ˆæœä¸€æ ·ï¼Œä¸è¿‡æ˜¯åŠ¨æ€åœ°æ·»åŠ äº‹ä»¶å -->
<template>
Â  <button @[event]="clickme">ç‚¹æˆ‘</button>
</template>
<script setup lang="ts">
Â  // åŠ¨æ€æ·»åŠ äº‹ä»¶å
Â  const event='click'
Â  const clickme = () => {
Â  Â  const a:string='åœ¨æ§åˆ¶å°æ˜¾ç¤ºæˆ‘'
Â  Â  console.log("ğŸš€ ~ file: App.vue:7 ~ clickme ~ a:", a)
Â  }
</script>
<style></style> Â 
 Â 
```
:::
![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312216465.png)



ç»™å…ƒç´ å¥—ä¸€ä¸ªçˆ¶çº§çš„æ ‡ç­¾ï¼Œæ§åˆ¶å°æ˜¾ç¤ºæ—¶ä¼šå†’æ³¡çš„æ˜¾ç¤ºï¼Œä¹Ÿå°±æ˜¯ä»é‡Œåˆ°å¤–ï¼Œå…ˆè§¦å‘buttonå…ƒç´ çš„äº‹ä»¶ï¼Œå†è§¦å‘çˆ¶çº§divå…ƒç´ çš„äº‹ä»¶ï¼Œçœ‹ä»£ç ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
  <div @click="faClick">
    <button @[event]="clickme">ç‚¹æˆ‘</button>
Â  Â  <!-- å¯ä»¥é€šè¿‡.stopé˜»æ­¢å†’æ³¡äº‹ä»¶ï¼Œçˆ¶çº§çš„äº‹ä»¶å°†ä¸ä¼šè§¦å‘ -->
Â  Â  <button @[event].stop="clickme">ç‚¹æˆ‘</button>
  </div>
</template>
<script setup lang="ts">
  // åŠ¨æ€æ·»åŠ äº‹ä»¶å
  const event='click'

  const faClick=()=>{
    const a:string='åœ¨æ§åˆ¶å°è¿›è¡Œå†’æ³¡çš„æ˜¾ç¤ºçˆ¶çº§'
    console.log("ğŸš€ ~ file: App.vue:7 ~ clickme ~ a:", a)
  }

  const clickme = () => {
    const a:string='åœ¨æ§åˆ¶å°æ˜¾ç¤ºæˆ‘'
    console.log("ğŸš€ ~ file: App.vue:7 ~ clickme ~ a:", a)
  }
</script>
<style></style>  
```
:::

![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312217388.png)

è¿˜æœ‰æ›´å¤šè·Ÿstopä¸€æ ·çš„äº‹ä»¶ä¿®é¥°ç¬¦ï¼Œä¾‹å¦‚ï¼š

- .stop
- .prevent
- .self
- .capture
- .once
- .passive

::: details å±•å¼€ä»£ç 

```html
<!-- å•å‡»äº‹ä»¶å°†åœæ­¢ä¼ é€’ -->
<a @click.stop="doThis"></a>

<!-- æäº¤äº‹ä»¶å°†ä¸å†é‡æ–°åŠ è½½é¡µé¢ -->
<form @submit.prevent="onSubmit"></form>

<!-- ä¿®é¥°è¯­å¯ä»¥ä½¿ç”¨é“¾å¼ä¹¦å†™ -->
<a @click.stop.prevent="doThat"></a>

<!-- ä¹Ÿå¯ä»¥åªæœ‰ä¿®é¥°ç¬¦ -->
<form @submit.prevent></form>

<!-- ä»…å½“ event.target æ˜¯å…ƒç´ æœ¬èº«æ—¶æ‰ä¼šè§¦å‘äº‹ä»¶å¤„ç†å™¨ -->
<!-- ä¾‹å¦‚ï¼šäº‹ä»¶å¤„ç†å™¨ä¸æ¥è‡ªå­å…ƒç´  -->
<div @click.self="doThat">...</div>
```
:::

`æ³¨æ„ï¼š`ä½¿ç”¨ä¿®é¥°ç¬¦æ—¶éœ€è¦æ³¨æ„è°ƒç”¨é¡ºåºï¼Œå› ä¸ºç›¸å…³ä»£ç æ˜¯ä»¥ç›¸åŒçš„é¡ºåºç”Ÿæˆçš„ã€‚å› æ­¤ä½¿ç”¨ `@click.prevent.self` ä¼šé˜»æ­¢**å…ƒç´ åŠå…¶å­å…ƒç´ çš„æ‰€æœ‰ç‚¹å‡»äº‹ä»¶çš„é»˜è®¤è¡Œä¸º**è€Œ `@click.self.prevent` åˆ™åªä¼šé˜»æ­¢**å¯¹å…ƒç´ æœ¬èº«çš„ç‚¹å‡»äº‹ä»¶çš„é»˜è®¤è¡Œä¸º**ã€‚



.captureã€.once å’Œ .passive ä¿®é¥°ç¬¦ä¸[åŸç”Ÿ addEventListener äº‹ä»¶](https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener#options)ç›¸å¯¹åº”ï¼š

::: details å±•å¼€ä»£ç 

```html
<!-- æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ï¼Œä½¿ç”¨ `capture` æ•è·æ¨¡å¼ -->
<!-- ä¾‹å¦‚ï¼šæŒ‡å‘å†…éƒ¨å…ƒç´ çš„äº‹ä»¶ï¼Œåœ¨è¢«å†…éƒ¨å…ƒç´ å¤„ç†å‰ï¼Œå…ˆè¢«å¤–éƒ¨å¤„ç† -->
<div @click.capture="doThis">...</div>

<!-- ç‚¹å‡»äº‹ä»¶æœ€å¤šè¢«è§¦å‘ä¸€æ¬¡ -->
<a @click.once="doThis"></a>

<!-- æ»šåŠ¨äº‹ä»¶çš„é»˜è®¤è¡Œä¸º (scrolling) å°†ç«‹å³å‘ç”Ÿè€Œéç­‰å¾… `onScroll` å®Œæˆ -->
<!-- ä»¥é˜²å…¶ä¸­åŒ…å« `event.preventDefault()` -->
<div @scroll.passive="onScroll">...</div>
```
:::

.passive ä¿®é¥°ç¬¦ä¸€èˆ¬ç”¨äºè§¦æ‘¸äº‹ä»¶çš„ç›‘å¬å™¨ï¼Œå¯ä»¥ç”¨æ¥[æ”¹å–„ç§»åŠ¨ç«¯è®¾å¤‡çš„æ»šå±æ€§èƒ½](https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener#%E4%BD%BF%E7%94%A8_passive_%E6%94%B9%E5%96%84%E7%9A%84%E6%BB%9A%E5%B1%8F%E6%80%A7%E8%83%BD)ã€‚

`æ³¨æ„ï¼š`è¯·å‹¿åŒæ—¶ä½¿ç”¨ **.passive** å’Œ **.prevent**ï¼Œå› ä¸º .passive å·²ç»å‘æµè§ˆå™¨è¡¨æ˜äº†ä½ *ä¸æƒ³*é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚å¦‚æœä½ è¿™ä¹ˆåšäº†ï¼Œåˆ™ .prevent ä¼šè¢«å¿½ç•¥ï¼Œå¹¶ä¸”æµè§ˆå™¨ä¼šæŠ›å‡ºè­¦å‘Šã€‚



## v-bind

åŠ¨æ€ç»‘å®šå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ç®€å†™å½¢å¼' : 'ï¼Œçœ‹ä»£ç ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
Â  <div :id="id">
Â  Â  å±•ç¤ºæ•°æ®
Â  </div>
</template>
<script setup lang="ts">
Â  const id:string='123'
</script>
<style></style> Â 

<!-- ä¾‹å¦‚ï¼šå¯ä»¥è¿›è¡ŒåŠ¨æ€çš„ä¿®æ”¹æ ·å¼ -->
<template>
Â  <!-- é™æ€å’ŒåŠ¨æ€ç»‘å®šclassæ—¶ï¼Œä¸èƒ½æœ‰å¤šä¸ªé™æ€æˆ–å¤šä¸ªåŠ¨æ€ -->
Â  <div class="c" :class="[bo ? 'a' : 'b']">
Â  Â  å±•ç¤ºæ•°æ®
Â  </div>
</template>
<script setup lang="ts">
const bo: boolean = true
</script>
<style>
.a {
Â  color: green;
}
.b {
Â  color: red;
}
.c {
Â  background-color: black;
}
</style> Â 
```
:::
![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312217147.png)

![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312218239.png)


## v-model

åŒå‘ç»‘å®šï¼Œéœ€è¦ä½¿ç”¨åˆ°refæˆ–reactiveï¼Œçœ‹ä»£ç ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
Â  <div>
Â  Â  <input v-model="a" type="text">
Â  Â  <div>{{ a }}</div>
Â  </div>
</template>
<script setup lang="ts">
// ref reactiveåªè¦åŒ…è£¹å°±æ˜¯å“åº”å¼çš„
import {ref} from 'vue'
const a=ref('å“åº”å¼')
</script>
<style>
</style> Â 
```
:::
![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312221197.png)


## v-for

è·Ÿvue2çš„ç±»ä¼¼ï¼Œçœ‹ä»£ç ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
Â  <div :key="index" v-for="(item,index) in arr">
Â  Â  {{ index }} - {{ item }}
Â  </div>
</template>
<script setup lang="ts">
const arr:string[]=['å°å','å°æ˜','å°æ—']
</script>
<style>
</style> Â 
```
:::
![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312218820.png)



## v-once

ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œä¹‹åæ¸²æŸ“ä¸€æ¬¡ï¼Œçœ‹ä»£ç ï¼š

::: details å±•å¼€ä»£ç 

```Vue
<template>
Â  <div v-once>
Â  Â  {{ a }}
Â  </div>
</template>
<script setup lang="ts">
const a:string[]=['å°å','å°æ˜','å°æ—']
</script>
<style>
</style> Â 
```
:::

![](https://cdn.jsdelivr.net/gh/hr1201/img@main/imgs/202308312218660.png)



## v-memo

vue3.2æ–°å¢ï¼Œç¼“å­˜ä¸€ä¸ªæ¨¡æ¿çš„å­æ ‘ã€‚åœ¨å…ƒç´ å’Œç»„ä»¶ä¸Šéƒ½å¯ä»¥ä½¿ç”¨ã€‚ä¸ºäº†å®ç°ç¼“å­˜ï¼Œè¯¥æŒ‡ä»¤éœ€è¦ä¼ å…¥ä¸€ä¸ªå›ºå®šé•¿åº¦çš„ä¾èµ–å€¼æ•°ç»„è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœæ•°ç»„é‡Œçš„æ¯ä¸ªå€¼éƒ½ä¸æœ€åä¸€æ¬¡çš„æ¸²æŸ“ç›¸åŒï¼Œé‚£ä¹ˆæ•´ä¸ªå­æ ‘çš„æ›´æ–°å°†è¢«è·³è¿‡ã€‚



ä¸€èˆ¬è·Ÿv-forè¿ç”¨ï¼Œå¤šç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œv-memo ä»…ç”¨äºæ€§èƒ½è‡³ä¸Šåœºæ™¯ä¸­çš„å¾®å°ä¼˜åŒ–ï¼Œåº”è¯¥å¾ˆå°‘éœ€è¦ã€‚æœ€å¸¸è§çš„æƒ…å†µå¯èƒ½æ˜¯æœ‰åŠ©äºæ¸²æŸ“æµ·é‡ v-for åˆ—è¡¨ (é•¿åº¦è¶…è¿‡ 1000 çš„æƒ…å†µ)ï¼š


::: details å±•å¼€ä»£ç 

```HTML
<div v-for="item in list" :key="item.id" v-memo="[item.id === selected]">
  <p>ID: {{ item.id }} - selected: {{ item.id === selected }}</p>
  <p>...more child nodes</p>
</div>
```
:::

å½“ç»„ä»¶çš„ `selected` çŠ¶æ€æ”¹å˜ï¼Œé»˜è®¤ä¼šé‡æ–°åˆ›å»ºå¤§é‡çš„ vnode(è™šæ‹ŸèŠ‚ç‚¹ï¼ˆVirtual Nodeï¼‰)ï¼Œå°½ç®¡ç»å¤§éƒ¨åˆ†éƒ½è·Ÿä¹‹å‰æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚`v-memo` ç”¨åœ¨è¿™é‡Œæœ¬è´¨ä¸Šæ˜¯åœ¨è¯´â€œ**åªæœ‰å½“è¯¥é¡¹çš„è¢«é€‰ä¸­çŠ¶æ€æ”¹å˜æ—¶æ‰éœ€è¦æ›´æ–°**â€ã€‚è¿™ä½¿å¾—æ¯ä¸ªé€‰ä¸­çŠ¶æ€æ²¡æœ‰å˜çš„é¡¹ èƒ½å®Œå…¨é‡ç”¨ä¹‹å‰çš„ vnode å¹¶è·³è¿‡å·®å¼‚æ¯”è¾ƒã€‚

æ³¨æ„è¿™é‡Œ memo ä¾èµ–æ•°ç»„ä¸­å¹¶ä¸éœ€è¦åŒ…å« `item.id`ï¼Œå› ä¸º Vue ä¹Ÿä¼šæ ¹æ® item çš„ `:key` è¿›è¡Œåˆ¤æ–­ã€‚

