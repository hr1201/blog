<template>
    <div>
        <div ref="div" style="font-size: 20px;font-weight: 600;color: #ecc208;">{{ str }}</div>
        <Button @click="change" hoverF="ä¿®æ”¹" hoverS="click!" />
    </div>
</template>

<script setup lang='ts'>
import { ref, getCurrentInstance, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onMounted, onUnmounted, onUpdated, onRenderTracked, onRenderTriggered } from 'vue';
import Button from '../../ç»„ä»¶åº“/Button.vue'

// import { ref } from 'vue'
// åœ¨ä½¿ç”¨options APIæ—¶æ˜¯æ²¡æœ‰beforeCreateå’Œcreatedè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸçš„
// setupè¯­æ³•ç³–æ¨¡å¼æ˜¯æ²¡æœ‰beforeCreateå’Œcreatedè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸçš„
console.log('setup')

const str = ref<string>('Rarrot')
const div = ref<HTMLDivElement>()
const change = () => {
    str.value = "æˆ‘è¢«ä¿®æ”¹äº†"
}
// é€šè¿‡getCurrentInstanceæŸ¥çœ‹å½“å‰ç»„ä»¶çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªhook
const instance=getCurrentInstance()
console.log("ğŸš€  instance", instance)

// ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“å‰è°ƒç”¨ï¼Œæ­¤æ—¶æ ¹å…ƒç´ ä¸å­˜åœ¨ï¼Œæ— æ³•è®¿é—®åˆ°DOM
onBeforeMount(() => {
    console.log("ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“å‰è°ƒç”¨", div.value)//undefined
})

// ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨ï¼Œè¯¥å…ƒç´ ç°åœ¨å¯ç”¨ï¼Œå…è®¸ç›´æ¥DOMè®¿é—®
onMounted(() => {
    console.log("ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨", div.value)//<div>Rarrot</div>
})

// è·å–æ›´æ–°ä¹‹å‰çš„dom
onBeforeUpdate(() => {
    console.log("æ›´æ–°å‰")
})

// è·å–æ›´æ–°ä¹‹åçš„dom
onUpdated(() => {
    console.log("æ›´æ–°å")
})

// é”€æ¯ç»„ä»¶ä¹‹å‰è°ƒç”¨
onBeforeUnmount(() => {
    console.log("é”€æ¯ç»„ä»¶ä¹‹å‰è°ƒç”¨")
})

// é”€æ¯ç»„ä»¶ä¹‹åè°ƒç”¨
onUnmounted(() => {
    console.log("é”€æ¯ç»„ä»¶ä¹‹åè°ƒç”¨")
})

// ä»¥ä¸‹ä¸¤ä¸ªé’©å­ä¸»è¦ç”¨äºè°ƒè¯•ï¼ŒonRenderTrackedç”¨æ¥è·å–æ”¶é›†çš„ä¾èµ–
onRenderTracked((e) => {
    // æ‰“å°effectç­‰å¯¹è±¡
    console.log(e)
})

// ä¾èµ–è¢«ä¿®æ”¹æ—¶åˆ™ä¼šè°ƒç”¨æ­¤é’©å­
onRenderTriggered((e) => {
    console.log(e)
})
</script>
<style scoped></style>